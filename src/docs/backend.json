
{
  "entities": {
    "user": {
      "title": "User",
      "description": "A user of the application.",
      "type": "object",
      "properties": {
        "uid": { "type": "string", "description": "The user's unique ID." },
        "email": { "type": "string", "format": "email", "description": "The user's email address." },
        "displayName": { "type": "string", "description": "The user's display name." },
        "photoURL": { "type": "string", "format": "uri", "description": "The URL of the user's profile picture." },
        "role": { "type": "string", "description": "The role of the user.", "enum": ["customer", "admin", "outlet", "vendor", "rider"] },
        "status": { "type": "string", "description": "The approval status of the user.", "enum": ["pending", "approved", "rejected"] },
        "wishlist": { "type": "array", "description": "An array of product IDs that the user has added to their wishlist.", "items": { "type": "string" } },
        "addresses": { "type": "array", "items": { "$ref": "#/entities/address" } },
        "outletId": { "type": "string", "description": "The ID of the outlet this user manages, if applicable." },
        "assignedOutlets": {
            "type": "array",
            "description": "An array of outlet IDs that the vendor is allowed to supply to.",
            "items": { "type": "string" }
        },
        "createdAt": { "type": "string", "format": "date-time", "description": "The timestamp when the user account was created." },
        "loyaltyPoints": { "type": "number", "description": "The user's current loyalty point balance." },
        "totalSpent": { "type": "number", "description": "The total amount of money spent by the user." },
        "membershipTier": { "type": "string", "enum": ["silver", "gold", "platinum"], "description": "The user's membership level." }
      },
      "required": ["uid", "email", "role", "status"]
    },
    "address": {
      "title": "Address",
      "description": "A structured address for deliveries and locations.",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "label": { "type": "string", "enum": ["Home", "Office", "Other"] },
        "name": { "type": "string" },
        "phone": { "type": "string" },
        "division": { "type": "string" },
        "district": { "type": "string" },
        "upazila": { "type": "string" },
        "area": { "type": "string" },
        "streetAddress": { "type": "string" },
        "coordinates": {
          "type": "object",
          "properties": {
            "lat": { "type": "number" },
            "lng": { "type": "number" }
          }
        }
      },
      "required": ["label", "name", "phone", "district", "upazila", "area", "streetAddress"]
    },
    "point_transaction": {
      "title": "Point Transaction",
      "description": "A log of every loyalty point transaction for a user.",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "userId": { "type": "string" },
        "pointsChange": { "type": "number", "description": "Positive for earning, negative for redeeming." },
        "type": { "type": "string", "enum": ["earn", "redeem", "adjustment"] },
        "reason": { "type": "string", "description": "Reason for the transaction, e.g., 'Purchase: [OrderID]' or 'Admin Adjustment'." },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["userId", "pointsChange", "type", "reason", "createdAt"]
    },
    "vendor": {
      "title": "Vendor",
      "description": "A product supplier for Averzo.",
      "type": "object",
      "properties": {
        "id": { "type": "string", "description": "The vendor's unique ID." },
        "name": { "type": "string", "description": "The name of the vendor company." },
        "contact": { "type": "string", "format": "email", "description": "The primary contact email for the vendor." },
        "status": { "type": "string", "description": "The status of the vendor.", "enum": ["Active", "Inactive"] },
        "createdAt": { "type": "string", "format": "date-time", "description": "The timestamp when the vendor was added." }
      },
      "required": ["id", "name", "contact", "status"]
    },
    "outlet": {
      "title": "Outlet",
      "description": "A physical store location for Averzo.",
      "type": "object",
      "properties": {
        "id": { "type": "string", "description": "The outlet's unique ID." },
        "name": { "type": "string", "description": "The name of the outlet." },
        "location": { 
          "type": "object",
          "properties": {
            "address": { "type": "string" },
            "lat": { "type": "number" },
            "lng": { "type": "number" }
          },
          "description": "The physical address and coordinates of the outlet."
        },
        "status": { "type": "string", "description": "The operational status of the outlet.", "enum": ["Active", "Inactive"] },
        "managerId": { "type": "string", "description": "The UID of the user managing this outlet." },
        "createdAt": { "type": "string", "format": "date-time", "description": "The timestamp when the outlet was added." }
      },
      "required": ["name", "location", "status"]
    },
    "pos_sale": {
      "title": "POS Sale",
      "description": "Represents a single point-of-sale transaction at an outlet.",
      "type": "object",
      "properties": {
        "id": { "type": "string", "description": "The unique ID of the sale." },
        "outletId": { "type": "string", "description": "The ID of the outlet where the sale occurred." },
        "soldBy": { "type": "string", "description": "The UID of the sales assistant who made the sale." },
        "items": { 
          "type": "array", 
          "items": { 
            "type": "object", 
            "properties": { 
              "productId": { "type": "string" }, 
              "productName": { "type": "string" },
              "variantSku": { "type": "string" },
              "quantity": { "type": "number" }, 
              "price": { "type": "number" }
            },
            "required": ["productId", "productName", "variantSku", "quantity", "price"]
          } 
        },
        "subtotal": { "type": "number", "description": "The total amount before discounts." },
        "discountAmount": { "type": "number", "description": "The amount discounted via a promo code." },
        "promoCode": { "type": "string", "description": "The promo code used for the sale." },
        "totalAmount": { "type": "number", "description": "The final amount after discounts." },
        "paymentMethod": { "type": "string", "enum": ["cash", "card", "mobile"] },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["outletId", "soldBy", "items", "subtotal", "totalAmount", "paymentMethod", "createdAt"]
    },
     "order": {
      "title": "Online Order",
      "description": "Represents an online order placed by a customer.",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "customerId": { "type": "string" },
        "shippingAddress": {
          "type": "object",
          "properties": {
            "name": { "type": "string" },
            "phone": { "type": "string" },
            "division": { "type": "string" },
            "district": { "type": "string" },
            "upazila": { "type": "string" },
            "area": { "type": "string" },
            "streetAddress": { "type": "string" }
          }
        },
        "items": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "productId": { "type": "string" },
              "productName": { "type": "string" },
              "variantSku": { "type": "string" },
              "quantity": { "type": "number" },
              "price": { "type": "number" }
            }
          }
        },
        "totalAmount": { "type": "number", "description": "The amount paid by the customer (can be partial for pre-orders)." },
        "fullOrderValue": { "type": "number", "description": "The total value of the order, especially for pre-orders with partial payment." },
        "assignedOutletId": { "type": "string" },
        "riderId": { "type": "string", "description": "The UID of the rider assigned to this delivery." },
        "status": { "type": "string", "enum": ["new", "preparing", "ready_for_pickup", "out_for_delivery", "delivered", "canceled", "pre-ordered", "fulfilled"] },
        "orderType": { "type": "string", "enum": ["regular", "pre-order"] },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["customerId", "shippingAddress", "items", "totalAmount", "assignedOutletId", "status", "createdAt"]
    },
    "product": {
      "title": "Product",
      "description": "A product sold on the Averzo platform.",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "name": { "type": "string" },
        "description": { "type": "string" },
        "category": { "type": "string" },
        "group": { "type": "string" },
        "subcategory": { "type": "string" },
        "price": { "type": "number", "description": "The base selling price of the product if no variants have specific prices." },
        "compareAtPrice": { "type": "number", "description": "The original price (MRP) to show a discount." },
        "baseSku": { "type": "string", "description": "The base Stock Keeping Unit for the product." },
        "specifications": {
          "type": "object",
          "description": "A map of key-value pairs for product specifications.",
          "additionalProperties": { "type": "string" }
        },
        "total_stock": { "type": "number", "description": "Aggregated stock from all variants across all locations." },
        "variants": {
          "type": "array",
          "description": "Product variants for different sizes and colors.",
          "items": {
            "type": "object",
            "properties": {
              "sku": { "type": "string", "description": "Unique SKU for the variant." },
              "color": { "type": "string" },
              "size": { "type": "string" },
              "image": { "type": "string", "format": "uri", "description": "Image URL specific to this variant." },
              "stock": { "type": "number", "description": "Total stock for this variant across all outlets." },
              "price": { "type": "number", "description": "Price specific to this variant." },
              "compareAtPrice": { "type": "number", "description": "The original price (MRP) for this specific variant." },
              "outlet_stocks": {
                "type": "object",
                "description": "Stock count per outlet for this specific variant.",
                "additionalProperties": { "type": "number" }
              }
            },
            "required": ["sku", "stock", "price"]
          }
        },
        "image": { "type": "string", "format": "uri", "description": "Main product image." },
        "gallery": { "type": "array", "items": { "type": "string", "format": "uri" }, "description": "A gallery of additional product images." },
        "videos": { "type": "array", "items": { "type": "string", "format": "uri" }, "description": "A list of product video URLs (e.g., YouTube embeds)." },
        "brand": { "type": "string" },
        "colors": { "type": "array", "items": { "type": "string" } },
        "sizes": { "type": "array", "items": { "type": "string" } },
        "vendorId": { "type": "string" },
        "status": { "type": "string", "enum": ["pending", "approved", "rejected"] },
        "createdAt": { "type": "string", "format": "date-time" },
        "discount": { "type": "number", "description": "The calculated discount percentage, derived from price and compareAtPrice." },
        "isNew": { "type": "boolean", "description": "Whether the product is a new arrival." },
        "isBestSeller": { "type": "boolean", "description": "Whether the product is a best seller." },
        "isBundle": { "type": "boolean", "description": "Whether the product is a bundle offer."},
        "giftWithPurchase": {
          "type": "object",
          "description": "Details of a free gift offered with the product.",
          "properties": {
            "enabled": { "type": "boolean" },
            "description": { "type": "string", "description": "A short description of the free gift." }
          }
        },
        "preOrder": {
            "type": "object",
            "description": "Pre-order specific settings for the product.",
            "properties": {
                "enabled": { "type": "boolean" },
                "releaseDate": { "type": "string", "format": "date-time" },
                "depositType": { "type": "string", "enum": ["percentage", "fixed"] },
                "depositAmount": { "type": "number" },
                "limit": { "type": "number" }
            }
        },
        "flashSale": {
            "type": "object",
            "description": "Details for a limited-time flash sale on the product.",
            "properties": {
                "enabled": { "type": "boolean" },
                "endDate": { "type": "string", "format": "date-time" }
            }
        }
      },
      "required": ["name", "price", "total_stock", "vendorId", "status", "category", "group", "subcategory", "brand", "image", "baseSku", "variants"]
    },
    "question": {
      "title": "Question",
      "description": "A customer question about a product.",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "productId": { "type": "string" },
        "questionText": { "type": "string" },
        "answerText": { "type": "string" },
        "askedByUid": { "type": "string" },
        "askedByName": { "type": "string" },
        "answeredByUid": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" },
        "answeredAt": { "type": "string", "format": "date-time" }
      },
      "required": ["productId", "questionText", "askedByUid", "askedByName", "createdAt"]
    },
    "stock_request": {
      "title": "Stock Request",
      "description": "A request from a vendor to supply stock to an outlet.",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "vendorId": { "type": "string" },
        "outletId": { "type": "string" },
        "items": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "productId": { "type": "string" },
              "productName": { "type": "string" },
              "quantity": { "type": "number" },
              "variantSku": { "type": "string" },
              "variantDescription": { "type": "string" }
            },
            "required": ["productId", "productName", "quantity", "variantSku"]
          }
        },
        "totalQuantity": { "type": "number" },
        "status": { "type": "string", "enum": ["pending", "approved", "shipped", "received", "rejected"] },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["vendorId", "outletId", "items", "totalQuantity", "status", "createdAt"]
    },
    "delivery_challan": {
      "title": "Delivery Challan",
      "description": "A digital document authorizing the transfer of stock from a vendor to an outlet.",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "stockRequestId": { "type": "string" },
        "vendorId": { "type": "string" },
        "outletId": { "type": "string" },
        "items": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "productId": { "type": "string" },
              "productName": { "type": "string" },
              "quantity": { "type": "number" },
              "variantSku": { "type": "string" },
              "variantDescription": { "type": "string" }
            },
            "required": ["productId", "productName", "quantity", "variantSku"]
          }
        },
        "totalQuantity": { "type": "number" },
        "status": { "type": "string", "enum": ["issued", "in_transit", "received"] },
        "issuedAt": { "type": "string", "format": "date-time" }
      },
      "required": ["stockRequestId", "vendorId", "outletId", "items", "totalQuantity", "status", "issuedAt"]
    },
    "stock_transfer": {
      "title": "Stock Transfer",
      "description": "A request to transfer stock from one outlet to another, initiated by an admin.",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "sourceOutletId": { "type": "string" },
        "destinationOutletId": { "type": "string" },
        "productId": { "type": "string" },
        "productName": { "type": "string" },
        "variantSku": { "type": "string" },
        "quantity": { "type": "number" },
        "status": { "type": "string", "enum": ["requested", "dispatched", "received", "cancelled"] },
        "requestedBy": { "type": "string", "description": "UID of the admin who initiated the transfer." },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["sourceOutletId", "destinationOutletId", "productId", "quantity", "status", "requestedBy", "createdAt"]
    },
    "coupon": {
      "title": "Coupon",
      "description": "A promotional code for discounts.",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "code": { "type": "string", "description": "The unique code for the coupon (e.g., WINTER20)." },
        "discountType": { "type": "string", "enum": ["percentage", "fixed"], "description": "The type of discount." },
        "value": { "type": "number", "description": "The discount value (either percentage or fixed amount)." },
        "minimumSpend": { "type": "number", "description": "The minimum purchase amount to apply the coupon." },
        "usageLimit": { "type": "number", "description": "Total number of times the coupon can be used." },
        "usedCount": { "type": "number", "description": "How many times the coupon has been used." },
        "expiryDate": { "type": "string", "format": "date-time", "description": "The expiration date of the coupon." },
        "creatorType": { "type": "string", "enum": ["admin", "vendor"], "description": "Who created the coupon." },
        "creatorId": { "type": "string", "description": "The UID of the admin or vendor who created it." },
        "applicableProducts": { "type": "array", "items": { "type": "string" }, "description": "Array of product IDs this coupon applies to. Empty means all." },
        "createdAt": { "type": "string", "format": "date-time", "description": "The timestamp when the coupon was created." }
      },
      "required": ["code", "discountType", "value", "expiryDate", "creatorType", "creatorId"]
    },
    "notification_subscription": {
      "title": "Notification Subscription",
      "description": "A record of a user's request to be notified when a product is back in stock.",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "userId": { "type": "string", "description": "The UID of the subscribing user, if logged in." },
        "email": { "type": "string", "format": "email", "description": "The email address to notify." },
        "productId": { "type": "string" },
        "status": { "type": "string", "enum": ["pending", "notified", "fulfilled"], "description": "Status of the notification." },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["email", "productId", "status", "createdAt"]
    }
  },
  "auth": {
    "providers": ["google.com", "password"]
  },
  "firestore": {
    "/users/{userId}": { "schema": { "$ref": "#/entities/user" }, "description": "Stores user profile information, including their role, status, and wishlist." },
    "/users/{userId}/points_history/{transactionId}": { "schema": { "$ref": "#/entities/point_transaction" }, "description": "Logs all loyalty point transactions for a user." },
    "/vendors/{vendorId}": { "schema": { "$ref": "#/entities/vendor" }, "description": "Stores information about product suppliers (vendors)." },
    "/outlets/{outletId}": { "schema": { "$ref": "#/entities/outlet" }, "description": "Stores information about physical store locations (outlets)." },
    "/pos_sales/{saleId}": { "schema": { "$ref": "#/entities/pos_sale" }, "description": "Logs all point-of-sale transactions from outlets." },
    "/products/{productId}": { "schema": { "$ref": "#/entities/product" }, "description": "Stores all product information for the platform." },
    "/products/{productId}/questions/{questionId}": { "schema": { "$ref": "#/entities/question"}, "description": "Stores customer questions and answers for a specific product."},
    "/stock_requests/{requestId}": { "schema": { "$ref": "#/entities/stock_request" }, "description": "Tracks stock movement requests from vendors to outlets." },
    "/delivery_challans/{challanId}": { "schema": { "$ref": "#/entities/delivery_challan" }, "description": "Stores delivery challans generated after stock request approvals." },
    "/orders/{orderId}": { "schema": { "$ref": "#/entities/order" }, "description": "Stores customer online orders routed to specific outlets for fulfillment." },
    "/stock_transfers/{transferId}": { "schema": { "$ref": "#/entities/stock_transfer" }, "description": "Tracks inter-outlet stock transfers initiated by admins." },
    "/coupons/{couponId}": { "schema": { "$ref": "#/entities/coupon" }, "description": "Stores all promotional codes for discounts." },
    "/notification_subscriptions/{subscriptionId}": { "schema": { "$ref": "#/entities/notification_subscription" }, "description": "Stores all user requests for back-in-stock notifications." }
  }
}
